<launch>
  <arg name="env" default="empty"                  doc="Name of the environment"/>
  <arg name="gui" default="$(optenv GUI true)"     doc="Start gzclient (Gazebo's GUI)"/>

  <arg name="paused"  value="$(optenv PAUSED false)"  doc="Start the simulation paused"/>
  <arg name="debug"   value="$(optenv DEBUG false)" 	doc="Enable debugging with gdb"/>
  <arg name="verbose" value="$(optenv VERBOSE true)" doc="Enable verbose output in Gazebo"/>
  <arg name="rosbag_out_dir" value="$(optenv ROSBAG_OUT_DIR /tmp)" doc="Where to dump recorded data to."/>
  <arg name="world_name" doc="Select world file to run" value="$(env WORLD_NAME)"/>



  <!-- Launch Gazebo world -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="debug"        value="$(arg debug)" />
    <arg name="gui"          value="$(arg gui)" />
    <arg name="paused"       value="$(arg paused)"/>
    <arg name="use_sim_time" value="true"/>
    <arg name="verbose"      value="$(arg verbose)"/>
    <arg name="world_name"   value="$(arg world_name)"/>
  </include>

  <arg name="pose1_x" value="$(env START_X)"/>
  <arg name="pose1_y" default="$(env START_Y)"/>
  <arg name="pose1_Y" value="0"/>

  <!-- Spawn robot/s -->
  <include file="$(find ca_gazebo)/launch/include/spawn_multirobot.launch">
    <arg name="env" value="empty"/>
    <arg name="pose1_x" default="$(arg pose1_x)"/>
    <arg name="pose1_y" default="$(arg pose1_y)"/>
    <arg name="pose1_Y" default="$(arg pose1_Y)"/>
  </include>

  <include file="$(find ca_mapping_exploration)/launch/explore_lite.launch">
  </include>

  <include file="$(find visibility_server)/launch/visibility_server.launch">
    <arg name="start_x" default="$(arg pose1_x)"/>
    <arg name="start_y" default="$(arg pose1_y)"/>
  </include>

 <node pkg="rosbag" type="record" name="record_gts_and_explored"
       args="record -o $(arg rosbag_out_dir) /create1/explored /create1/travelled_distance"/>   

</launch>